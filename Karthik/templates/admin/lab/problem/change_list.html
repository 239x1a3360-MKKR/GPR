{% extends "admin/change_list.html" %}
{% load i18n admin_urls static %}

{% block object-tools-items %}
    {{ block.super }}
    <li>
        <a href="{% url 'admin:lab_problem_import_csv' %}" class="addlink">
            üì• Import from CSV
        </a>
    </li>
{% endblock %}

{% block result_list %}
    {{ block.super }}
    <script>
    // Add editor link to each problem row
    document.addEventListener('DOMContentLoaded', function() {
        const rows = document.querySelectorAll('.results tbody tr');
        rows.forEach(function(row) {
            const titleCell = row.querySelector('th.field-title a');
            if (titleCell) {
                const problemId = titleCell.href.match(/\/(\d+)\//);
                if (problemId) {
                    const editorLink = document.createElement('a');
                    editorLink.href = '/admin/lab/problem/' + problemId[1] + '/editor/';
                    editorLink.textContent = 'üìù Editor';
                    editorLink.style.marginLeft = '10px';
                    editorLink.style.color = '#417690';
                    titleCell.parentNode.appendChild(editorLink);
                }
            }
        });
    });
    </script>
{% endblock %}

